generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum USER_TYPES {
  CUSTOMERS
  VENDORS
}

enum RECIEPT_TYPES {
  INVOICE
  BILL
}

enum RECIEPT_STATUS {
  PENDING
  DONE
}

model LoginUsers {
  id       Int    @id @default(autoincrement())
  email    String @unique
  password String
}

model Users {
  id            Int            @id @default(autoincrement())
  type          USER_TYPES
  company_name  String?
  website       String?
  email         String?
  created_at    DateTime       @default(now())
  updated_at    DateTime       @default(now())
  phones        Phones[]
  addresses     Addresses[]
  reciepts      Reciepts[]
  user_products UserProducts[]
}

model Phones {
  id             Int    @id @default(autoincrement())
  number         String
  contact_person String
  user_id        Int
  users          Users  @relation(fields: [user_id], references: [id])
}

model Addresses {
  id      Int    @id @default(autoincrement())
  address String
  country String
  user_id Int
  users   Users  @relation(fields: [user_id], references: [id])
}

model Reciepts {
  id           Int            @id @default(autoincrement())
  type         RECIEPT_TYPES
  status       RECIEPT_STATUS
  currency     String
  user_id      Int
  created_at   DateTime       @default(now())
  updated_at   DateTime       @default(now())
  users        Users          @relation(fields: [user_id], references: [id])
  reciept_item RecieptItem[]
}

model Products {
  id              Int              @id @default(autoincrement())
  name            String
  oem             String?
  created_at      DateTime         @default(now())
  updated_at      DateTime         @default(now())
  product_images  ProductImages[]
  user_products   UserProducts[]
  Product_options ProductOptions[]
}

model ProductImages {
  id         Int      @id @default(autoincrement())
  url        String
  product_id Int
  created_at DateTime @default(now())
  updated_at DateTime @default(now())
  products   Products @relation(fields: [product_id], references: [id])
}

model UserProducts {
  id           Int           @id @default(autoincrement())
  code         String
  user_id      Int
  products_id  Int
  products     Products      @relation(fields: [products_id], references: [id])
  users        Users         @relation(fields: [user_id], references: [id])
  reciept_item RecieptItem[]
}

model RecieptItem {
  id              Int          @id @default(autoincrement())
  price           Float
  quantity        Int
  user_product_id Int
  reciept_id      Int
  reciepts        Reciepts     @relation(fields: [reciept_id], references: [id])
  user_products   UserProducts @relation(fields: [user_product_id], references: [id])
}

model ProductOptions {
  id             Int      @id @default(autoincrement())
  year           String?
  chasses_number String?
  product_id     Int
  options_id     Int
  regions_id     Int
  cabin_id       Int?
  products       Products @relation(fields: [product_id], references: [id])
  options        Options  @relation(fields: [options_id], references: [id])
  regions        Regions  @relation(fields: [regions_id], references: [id])
  cabins         Cabins?  @relation(fields: [cabin_id], references: [id])
}

model Options {
  id              Int              @id @default(autoincrement())
  option          String
  parent_id       Int?
  created_at      DateTime         @default(now())
  updated_at      DateTime         @default(now())
  options         Options[]        @relation("ParentOption")
  parent          Options?         @relation("ParentOption", fields: [parent_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  product_options ProductOptions[]
}

model Regions {
  id              Int              @id @default(autoincrement())
  region          String
  created_at      DateTime         @default(now())
  updated_at      DateTime         @default(now())
  product_options ProductOptions[]
}

model Cabins {
  id              Int              @id @default(autoincrement())
  cabin           String
  created_at      DateTime         @default(now())
  updated_at      DateTime         @default(now())
  product_options ProductOptions[]
}
